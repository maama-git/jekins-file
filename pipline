pipeline {
    agent any

    environment {
        NAME = "naama"
    }

    options {
        // הגדלתי ל-2 דקות כדי שה-sleep לא יכשיל את הריצה
        timeout(time: 2, unit: 'MINUTES')
    }

    stages {
        stage("Connect to GitHub") {
            steps {
                // שימוש בהרשאות
                withCredentials([
                    usernamePassword(credentialsId: 'UserGit', usernameVariable: 'USER', passwordVariable: 'PASS')
                ]) {
                    // פקודת bat צריכה להיות במבנה תקין
                    bat "echo Deploying as %USER% %PASS%"
                }
                
                // כל אלו חייבים להיות בתוך ה-steps של ה-stage
                sleep time: 15, unit: 'SECONDS'
                echo "Avital & Rachely"
                echo "Hello ${NAME}"
                echo "build number: ${env.BUILD_NUMBER}"
            }
        }

        stage("stage number two") {
            steps {
                echo "hi everyone"
            }
        }
    }
}
}
